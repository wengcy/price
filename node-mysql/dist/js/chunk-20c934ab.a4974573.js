(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20c934ab"],{"068d":function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,"#ctable .el-dialog{margin-top:5vh!important}#ctable .render_label p{margin:0}#ctable .cell{text-align:center}#ctable table{width:100%!important}#ctable .el-table colgroup,#ctable .el-table th{display:table-cell!important}#ctable .el-table--enable-row-hover .el-table__body tr:hover>td{background-color:inherit!important}#ctable .el-table--border td:first-child .cell,#ctable .el-table--border th:first-child .cell,#ctable .el-table .cell,#ctable .el-table th div{padding-left:3px!important}#ctable .el-table .cell,#ctable .el-table th div{padding-right:3px!important}#ctable .el-input__inner{padding:5px!important}#ctable .el-form--inline .el-form-item{display:inline-block;vertical-align:top;display:-webkit-box;display:-ms-flexbox;display:flex;margin-right:0}#ctable .el-form--inline .el-form-item__label{width:80px;-moz-text-align-last:justify;text-align-last:justify}#ctable .el-form-item__content{-webkit-box-flex:1;-ms-flex:1;flex:1}#ctable .el-select{width:100%}#ctable .el-dialog__footer{text-align:center}#ctable .el-button--primary{width:auto!important}#ctable .el-dialog__header{text-align:center}#ctable .el-dialog__body{padding:0 15px}#ctable .wper100{width:100%!important}",""]),t.locals={trOddColor:"#c3cdd6",trEvenColor:"#ead0b3"}},"9eff":function(e,t,r){"use strict";var a=r("e247"),l=r.n(a);l.a},bd0b:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"},attrs:{id:"ctable"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small","span-method":e.arraySpanMethod,"row-style":e.changeCss,"header-cell-class-name":"headerStyle "}},[r("el-table-column",{attrs:{prop:"district",label:"区域"}}),r("el-table-column",{attrs:{prop:"carType",label:"车型"}}),r("el-table-column",{attrs:{prop:"carNo",label:"车牌号"}}),r("el-table-column",{attrs:{prop:"loadWeight",label:"载重,(吨)","render-header":e.renderHeader}}),r("el-table-column",{attrs:{prop:"tel",label:"电话"}}),r("el-table-column",{attrs:{prop:"media",label:"介质"}}),r("el-table-column",{attrs:{label:"操作",width:"100px",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{staticClass:"mr10 font-12",attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.openUpdateDialog(t.row)}}},[e._v("编辑")]),r("el-link",{staticClass:"font-12",attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteCar(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"p15"},[r("el-button",{staticClass:"mt15 wper100",attrs:{type:"primary"},on:{click:e.openAddDialog}},[e._v("添加")])],1),r("el-dialog",{attrs:{title:e.title+"车信息",visible:e.isVisible,width:"80%","show-close":!1}},[r("el-form",{ref:"form",attrs:{model:e.form,inline:!0,rules:e.rules}},[r("el-form-item",{attrs:{label:"区域:",prop:"district"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入区域"},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}})],1),r("el-form-item",{attrs:{label:"车型:",prop:"carType"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入车型"},model:{value:e.form.carType,callback:function(t){e.$set(e.form,"carType",t)},expression:"form.carType"}})],1),r("el-form-item",{attrs:{label:"车牌号:",prop:"carNo"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入车牌号"},model:{value:e.form.carNo,callback:function(t){e.$set(e.form,"carNo",t)},expression:"form.carNo"}})],1),r("el-form-item",{attrs:{label:"载重:",prop:"loadWeight"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入载重(单位吨)"},model:{value:e.form.loadWeight,callback:function(t){e.$set(e.form,"loadWeight",t)},expression:"form.loadWeight"}})],1),r("el-form-item",{attrs:{label:"介质:",prop:"media"}},[r("el-select",{attrs:{placeholder:"请选择介质"},model:{value:e.form.media,callback:function(t){e.$set(e.form,"media",t)},expression:"form.media"}},e._l(e.mediaList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"电话:",prop:"tel"}},[r("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入联系电话"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),r("el-form-item",{attrs:{label:"图片:",prop:"picture"}},[r("van-uploader",{attrs:{"after-read":e.afterRead,"max-count":1,"before-read":e.beforeRead},model:{value:e.form.fileList,callback:function(t){e.$set(e.form,"fileList",t)},expression:"form.fileList"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.controlCar}},[e._v(e._s(e.title))]),r("el-button",{on:{click:e.toggleDialog}},[e._v("关闭")])],1)],1)],1)},l=[],i=(r("28a5"),r("ac6a"),r("6762"),r("2fdb"),r("7f7f"),r("eeb9")),o=r("bbd5"),s=r("8c1f"),n=r.n(s),c={data:function(){var e=function(e,t,r){var a=/^\d{11}$/;a.test(t)?r():r(new Error("输入正确的电话"))};return{isVisible:!1,title:"添加",districtList:[],carTypeList:[],mediaList:[{value:"汽油",label:"汽油"},{value:"柴油",label:"柴油"}],form:{district:"",carType:"",carNo:"",loadWeight:"",tel:"",media:"",picture:"",id:"",fileList:[]},rules:{district:[{required:!0,message:"请输入区域",trigger:"change"}],carType:[{required:!0,message:"请输入车型",trigger:"change"}],carNo:[{required:!0,message:"请输入车牌号",trigger:"change"}],loadWeight:[{required:!0,message:"请输入载重",trigger:"change"}],tel:[{required:!0,message:"请输入联系电话",trigger:"change"},{validator:e,trigger:"change"}],media:[{required:!0,message:"请选择介质",trigger:"change"}]},mergeSpanArr:[],mergeSpanArrIndex:"",oddDistrictArr:[],evenDistrictArr:[],tableData:[]}},mounted:function(){this.queryCar()},methods:{beforeRead:function(e){return"image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type||(this.$message.error("请上传jpeg、png、jpg图片"),!1)},afterRead:function(e){this.uploadImg(e)},uploadImg:function(e){var t=this;i["a"].requestPost("upload",{file:e.content,fileName:Date.now()+"-"+e.file.name},"post").then((function(e){e=e.data,"200"==e.code&&(console.log(e.url),t.form.picture=e.url)}))},queryCar:function(){var e=this;i["a"].request("car/queryCar").then((function(t){t=t.data,"200"==t.code?(e.tableData=t.data,e.setMergeArr(e.tableData),e.getDistrict(e.tableData)):e.$message.error("查询数据失败")}))},controlCar:function(){var e=this,t="";this.form.fileList=[],"添加"==this.title?t="addCar":"修改"==this.title&&(t="updateCar"),this.$refs["form"].validate((function(r){if(!r)return!1;e.requestCar(t,e.title)}))},requestCar:function(e,t){var r=this;console.log(this.form),i["a"].request("car/".concat(e),this.form,"post").then((function(e){e=e.data,console.log(e),"200"==e.code&&(r.$message({message:"".concat(t,"数据成功"),type:"success"}),r.queryCar(),r.isVisible=!1)}))},openAddDialog:function(){var e=this;this.isVisible=!this.isVisible,this.form={district:"",carType:"",carNo:"",loadWeight:"",tel:"",media:"",picture:"",fileList:[],uploadImgFlag:!1,id:""},this.title="添加",this.$nextTick((function(){e.$refs["form"].resetFields()}))},openUpdateDialog:function(e){var t=this;this.isVisible=!this.isVisible;var r=Object(o["a"])(e);this.title="修改",console.log(r),this.$nextTick((function(){t.$refs["form"].resetFields(),t.form=Object.assign({},t.form,r),t.form.fileList=[],t.form.fileList.push(r.picture)}))},toggleDialog:function(){this.isVisible=!this.isVisible},deleteCar:function(e){var t=this;this.form.id=e.id,this.$confirm("你确定要删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",showClose:!1}).then((function(){t.requestCar("deleteCar","删除")})).catch((function(){}))},getDistrict:function(e){var t=this,r=e.reduce((function(e,t){return e.includes(t.district)||e.push(t.district),e}),[]);r.forEach((function(e,r){r%2?t.oddDistrictArr.push(e):t.evenDistrictArr.push(e)}))},changeCss:function(e){var t=e.row;return this.oddDistrictArr.includes(t.district)?"background:"+n.a.trOddColor:this.evenDistrictArr.includes(t.district)?"background:"+n.a.trEvenColor:void 0},renderHeader:function(e,t){var r=t.column,a=r.label.split(",");return e("span",{class:"render_label"},[e("p",[a[0]]),e("p",{class:"small-font"},[a[1]])])},arraySpanMethod:function(e){var t=e.rowIndex,r=e.columnIndex;if(0===r){var a=this.mergeSpanArr[t],l=a>0?1:0;return{rowspan:a,colspan:l}}},setMergeArr:function(e){this.mergeSpanArr=[],this.mergeSpanArrIndex="";for(var t=0;t<e.length;t++)0===t?(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=0):e[t].district===e[t-1].district?(this.mergeSpanArr[this.mergeSpanArrIndex]+=1,this.mergeSpanArr.push(0)):(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=t)}}},d=c,p=(r("9eff"),r("2877")),f=Object(p["a"])(d,a,l,!1,null,null,null);t["default"]=f.exports},e247:function(e,t,r){var a=r("068d");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var l=r("499e").default;l("b3836a28",a,!0,{sourceMap:!1,shadowMode:!1})}}]);