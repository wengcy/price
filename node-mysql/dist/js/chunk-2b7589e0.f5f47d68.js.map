{"version":3,"sources":["webpack:///./src/views/ControlPrice.vue?11f3","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/typeof.js","webpack:///./src/assets/js/util.js","webpack:///src/views/ControlPrice.vue","webpack:///./src/views/ControlPrice.vue?ec2f","webpack:///./src/views/ControlPrice.vue","webpack:///./src/views/ControlPrice.vue?3909","webpack:///./node_modules/@babel/runtime-corejs2/core-js/symbol/iterator.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/symbol.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","attrs","tableData","arraySpanMethod","changeCss","renderHeader","scopedSlots","_u","key","fn","scope","_v","_s","row","price","trend","staticClass","_e","on","$event","openUpdateDialog","deletePrice","openAddDialog","title","isVisible","ref","form","rules","model","value","callback","$$v","$set","expression","_n","_l","item","label","slot","controlPrice","toggleDialog","staticRenderFns","obj","constructor","prototype","deep","objClone","Array","isArray","hasOwnProperty","data","options","supplier","name","density","id","mergeSpanArr","mergeSpanArrIndex","oddSupplierArr","evenSupplierArr","mounted","methods","queryPrice","url","$refs","validate","requestPrice","console","log","code","message","type","resetFields","getSupplier","supplierArr","includes","push","forEach","index","columnIndex","rowspan","_row","colspan","_col","setMergeArr","i","length","component","module","exports"],"mappings":"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","file":"js/chunk-2b7589e0.f5f47d68.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"width\":\"100%\"},attrs:{\"id\":\"wtable\"}},[_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.tableData,\"border\":\"\",\"size\":\"small\",\"span-method\":_vm.arraySpanMethod,\"row-style\":_vm.changeCss,\"header-cell-class-name\":\"headerStyle \"}},[_c('el-table-column',{attrs:{\"prop\":\"supplier\",\"label\":\"供应商\"}}),_c('el-table-column',{attrs:{\"prop\":\"name\",\"label\":\"品名\"}}),_c('el-table-column',{attrs:{\"prop\":\"price\",\"label\":\"单价,(元/吨)\",\"render-header\":_vm.renderHeader},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_vm._v(\"\\n        \"+_vm._s(scope.row.price)+\"\\n        \"),(scope.row.trend =='涨')?_c('span',{staticClass:\"blue\"},[_vm._v(\"↑\")]):(scope.row.trend =='跌')?_c('span',{staticClass:\"red\"},[_vm._v(\"↓\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"density\",\"label\":\"密度\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"100px\",\"prop\":\"id\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-link',{staticClass:\"mr10 font-12\",attrs:{\"size\":\"mini\",\"type\":\"primary\"},on:{\"click\":function($event){return _vm.openUpdateDialog(scope.row)}}},[_vm._v(\"编辑\")]),_c('el-link',{staticClass:\"font-12\",attrs:{\"size\":\"mini\",\"type\":\"danger\"},on:{\"click\":function($event){return _vm.deletePrice(scope.row)}}},[_vm._v(\"删除\")])]}}])})],1),_c('div',{staticClass:\"p15\"},[_c('el-button',{staticClass:\"mt15 wper100\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.openAddDialog}},[_vm._v(\"添加\")])],1),_c('el-dialog',{attrs:{\"title\":_vm.title+'油价信息',\"visible\":_vm.isVisible,\"width\":\"80%\",\"show-close\":false}},[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"inline\":true,\"rules\":_vm.rules}},[_c('el-form-item',{attrs:{\"label\":\"供应商:\",\"prop\":\"supplier\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"请输入供应商\"},model:{value:(_vm.form.supplier),callback:function ($$v) {_vm.$set(_vm.form, \"supplier\", $$v)},expression:\"form.supplier\"}})],1),_c('el-form-item',{attrs:{\"label\":\"品名:\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"type\":\"text\",\"autocomplete\":\"off\",\"placeholder\":\"请输入品名\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_c('el-form-item',{attrs:{\"label\":\"单价:\",\"prop\":\"price\"}},[_c('el-input',{attrs:{\"type\":\"number\",\"autocomplete\":\"off\",\"min\":\"0\",\"placeholder\":\"请输入单价\"},model:{value:(_vm.form.price),callback:function ($$v) {_vm.$set(_vm.form, \"price\", _vm._n($$v))},expression:\"form.price\"}})],1),_c('el-form-item',{attrs:{\"label\":\"涨跌:\",\"prop\":\"trend\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择幅度\"},model:{value:(_vm.form.trend),callback:function ($$v) {_vm.$set(_vm.form, \"trend\", $$v)},expression:\"form.trend\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',{attrs:{\"label\":\"密度:\",\"prop\":\"density\"}},[_c('el-input',{attrs:{\"placeholder\":\"请输入密度\",\"type\":\"number\",\"min\":\"0\",\"autocomplete\":\"off\"},model:{value:(_vm.form.density),callback:function ($$v) {_vm.$set(_vm.form, \"density\", _vm._n($$v))},expression:\"form.density\"}})],1)],1),_c('div',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.controlPrice}},[_vm._v(_vm._s(_vm.title))]),_c('el-button',{on:{\"click\":_vm.toggleDialog}},[_vm._v(\"关闭\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import _Symbol$iterator from \"../../core-js/symbol/iterator\";\nimport _Symbol from \"../../core-js/symbol\";\n\nfunction _typeof2(obj) { if (typeof _Symbol === \"function\" && typeof _Symbol$iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nexport default function _typeof(obj) {\n  if (typeof _Symbol === \"function\" && _typeof2(_Symbol$iterator) === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof _Symbol === \"function\" && obj.constructor === _Symbol && obj !== _Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}","function deep(obj) {\r\n  //判断拷贝的要进行深拷贝的是数组还是对象，是数组的话进行数组拷贝，对象的话进行对象拷贝\r\n  var objClone = Array.isArray(obj) ? [] : {};\r\n  //进行深拷贝的不能为空，并且是对象或者是\r\n  if (obj && typeof obj === \"object\") {\r\n    for (let key in obj) {\r\n      if (obj.hasOwnProperty(key)) {\r\n        if (obj[key] && typeof obj[key] === \"object\") {\r\n          objClone[key] = deep(obj[key]);\r\n        } else {\r\n          objClone[key] = obj[key];\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return objClone;\r\n}\r\n\r\nexport {\r\n\tdeep\r\n}","<template>\r\n  <div id=\"wtable\" style=\"width:100%\">\r\n    <el-table\r\n      :data=\"tableData\"\r\n      border\r\n      size=\"small\"\r\n      style=\"width:100%\"\r\n      :span-method=\"arraySpanMethod\"\r\n      :row-style=\"changeCss\"\r\n      header-cell-class-name=\"headerStyle \"\r\n    >\r\n      <el-table-column prop=\"supplier\" label=\"供应商\"></el-table-column>\r\n      <el-table-column prop=\"name\" label=\"品名\"></el-table-column>\r\n      <el-table-column prop=\"price\" label=\"单价,(元/吨)\" :render-header=\"renderHeader\">\r\n        <template slot-scope=\"scope\">\r\n          {{scope.row.price}}\r\n          <span v-if=\"scope.row.trend =='涨'\" class=\"blue\">↑</span>\r\n          <span v-else-if=\"scope.row.trend =='跌'\" class=\"red\">↓</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"density\" label=\"密度\"></el-table-column>\r\n      <el-table-column label=\"操作\" width=\"100px\" prop=\"id\">\r\n        <template slot-scope=\"scope\">\r\n          <el-link\r\n            class=\"mr10 font-12\"\r\n            size=\"mini\"\r\n            type=\"primary\"\r\n            @click=\"openUpdateDialog(scope.row)\"\r\n          >编辑</el-link>\r\n          <el-link\r\n            class=\"font-12\"\r\n            size=\"mini\"\r\n            type=\"danger\"\r\n            @click=\"deletePrice(scope.row)\"\r\n          >删除</el-link>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"p15\">\r\n      <el-button type=\"primary\" class=\"mt15 wper100\" @click=\"openAddDialog\">添加</el-button>\r\n    </div>\r\n    <el-dialog :title=\"title+'油价信息'\" :visible=\"isVisible\" width=\"80%\" :show-close=\"false\">\r\n      <el-form :model=\"form\" :inline=\"true\"  :rules=\"rules\" ref=\"form\">\r\n        <el-form-item label=\"供应商:\" prop=\"supplier\">\r\n          <el-input v-model=\"form.supplier\"  type=\"text\" autocomplete=\"off\" placeholder=\"请输入供应商\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"品名:\" prop=\"name\">\r\n          <el-input v-model=\"form.name\" type=\"text\" autocomplete=\"off\" placeholder=\"请输入品名\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"单价:\" prop=\"price\">\r\n          <el-input\r\n            v-model.number=\"form.price\"\r\n            type=\"number\"\r\n            autocomplete=\"off\"\r\n            min=\"0\"\r\n            placeholder=\"请输入单价\"\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"涨跌:\" prop=\"trend\">\r\n          <el-select v-model=\"form.trend\" placeholder=\"请选择幅度\" >\r\n            <el-option\r\n              v-for=\"item in options\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"密度:\" prop=\"density\">\r\n          <el-input v-model.number=\"form.density\"   placeholder=\"请输入密度\" type=\"number\" min=\"0\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button type=\"primary\" @click=\"controlPrice\">{{title}}</el-button>\r\n        <el-button  @click=\"toggleDialog\">关闭</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport FetchData from \"@/axios/index\";\r\nimport {deep }from \"@/assets/js/util\";\r\nexport default {\r\n  data() {\r\n     var validateMoney = (rule, value, callback) => {\r\n       let money=/^\\d+(\\.\\d{1,2})?$/;\r\n        if (!money.test(value)) {\r\n          callback(new Error('输入正确的金额'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n      var validateFloat = (rule, value, callback) => {\r\n       let density=/^(\\d*)(\\.\\d*)?|0$/;\r\n        if (!density.test(value)) {\r\n          callback(new Error('输入正确的密度'));\r\n        } else {\r\n          callback();\r\n        }\r\n      };\r\n    return {\r\n      isVisible: false,\r\n      title:'添加',\r\n      options: [{\r\n          value: '涨',\r\n          label: '涨'\r\n        }, {\r\n          value: '跌',\r\n          label: '跌'\r\n        }, {\r\n          value: '平',\r\n          label: '平'\r\n        }],\r\n      form: {\r\n        supplier: \"\",\r\n        name: \"\",\r\n        price: \"\",\r\n        trend: \"\",\r\n        density: \"\",\r\n        id:\"\"\r\n      },\r\n      rules: {\r\n         supplier: [\r\n            { required: true, message: '请输入供应商', trigger: 'change' },\r\n          ],\r\n          name: [\r\n            { required: true, message: '请输入品名', trigger: 'change' },\r\n          ],\r\n          trend: [\r\n            { required: true, message: '请选择幅度', trigger: 'change' }\r\n          ],\r\n          price: [\r\n            { required: true, message: '请输入价格', trigger: 'change' },\r\n            { validator: validateMoney, trigger: 'change' }\r\n          ],\r\n          density: [\r\n            { required: true, message: '请输入密度', trigger: 'change' },\r\n            { validator: validateFloat, trigger: 'change' }\r\n          ],\r\n          \r\n        },\r\n      mergeSpanArr: [], // 空数组，记录每一行的合并数\r\n      mergeSpanArrIndex: \"\", // mergeSpanArr的索引\r\n      oddSupplierArr: [],\r\n      evenSupplierArr: [],\r\n      tableData: []\r\n    };\r\n  },\r\n  mounted() {\r\n   this.queryPrice();\r\n  },\r\n  methods: {\r\n\r\n    queryPrice() {\r\n      FetchData.request(\"price/queryPrice\").then(data => {\r\n      data = data.data;\r\n      if (data.code == \"200\") {\r\n        this.tableData = data.data;\r\n        this.setMergeArr(this.tableData);\r\n        this.getSupplier(this.tableData);\r\n      } else {\r\n        this.$message.error(\"查询数据失败\");\r\n      }\r\n    });\r\n    },\r\n    controlPrice(){\r\n      let url = \"\";\r\n      if(this.title == \"添加\") {\r\n        url = \"addPrice\"\r\n      }else if (this.title == \"修改\") {\r\n        url = \"updatePrice\"\r\n      }\r\n      this.$refs[\"form\"].validate((valid) => {\r\n         if (valid) {\r\n            this.requestPrice(url,this.title);\r\n          } else {\r\n            return false;\r\n          }\r\n      })\r\n       \r\n    },\r\n    requestPrice(url,title){\r\n      FetchData.request(`price/${url}`,this.form).then(data => {\r\n        data = data.data;\r\n        console.log(data)\r\n        if (data.code == \"200\") {\r\n            this.$message({\r\n            message: `${title}数据成功`,\r\n            type: 'success'\r\n          });\r\n            this.queryPrice();\r\n            this.isVisible = false;\r\n          } else {\r\n            this.$message.error(`${title}数据失败`);\r\n          }\r\n      });\r\n    },\r\n    openAddDialog(){\r\n       this.isVisible = !this.isVisible;\r\n       this.form = {\r\n        supplier: \"\",\r\n        name: \"\",\r\n        price: \"\",\r\n        trend: \"\",\r\n        density: \"\",\r\n        id:\"\"\r\n      };\r\n      this.title = \"添加\";\r\n      this.$refs[\"form\"].resetFields();\r\n    },\r\n    openUpdateDialog(row){\r\n       this.isVisible = !this.isVisible;\r\n       console.log(row)\r\n      let cloneRow = deep(row)\r\n       this.form = cloneRow;\r\n       this.title = \"修改\";\r\n        this.$refs[\"form\"].resetFields();\r\n    },\r\n\r\n    toggleDialog() {\r\n      this.isVisible = !this.isVisible;\r\n    },\r\n    deletePrice(row) {\r\n        this.form.id = row.id;\r\n        this.$confirm('你确定要删除该条记录吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning',\r\n          showClose:false\r\n        }).then(() => {\r\n          this.requestPrice(\"deletePrice\",\"删除\");\r\n        }).catch(() => {\r\n                   \r\n        });\r\n      },\r\n    getSupplier(data) {\r\n      let supplier = data.reduce((supplierArr, item) => {\r\n        if (!supplierArr.includes(item.supplier)) {\r\n          supplierArr.push(item.supplier);\r\n        }\r\n        return supplierArr;\r\n      }, []);\r\n      supplier.forEach((element, index) => {\r\n        if (index % 2) {\r\n          this.oddSupplierArr.push(element);\r\n        } else {\r\n          this.evenSupplierArr.push(element);\r\n        }\r\n      });\r\n    },\r\n    changeCss({ row}) {\r\n      // 定义changeCss函数，这样当表格中的相应行满足自己设定的条件是就可以将该行css样式改变\r\n\r\n      if (this.oddSupplierArr.includes(row.supplier)) {\r\n        return \"background:#C3CDD6\";\r\n      } else if (this.evenSupplierArr.includes(row.supplier)) {\r\n        return \"background:#EAD0B3\";\r\n      }\r\n    },\r\n\r\n    renderHeader(h, { column }) {\r\n      let labelArr = column.label.split(\",\");\r\n      return (\r\n        <span class=\"render_label\">\r\n          <p>{labelArr[0]}</p>\r\n          <p class=\"small-font\">{labelArr[1]}</p>\r\n        </span>\r\n      );\r\n    },\r\n    arraySpanMethod({rowIndex,columnIndex }) {\r\n      if (columnIndex === 0) {\r\n        const _row = this.mergeSpanArr[rowIndex];\r\n        const _col = _row > 0 ? 1 : 0;\r\n        return {\r\n          rowspan: _row,\r\n          colspan: _col\r\n        };\r\n      }\r\n    },\r\n    setMergeArr(data) {\r\n      this.mergeSpanArr = [];\r\n      this.mergeSpanArrIndex = \"\";\r\n      for (var i = 0; i < data.length; i++) {\r\n        if (i === 0) {\r\n          this.mergeSpanArr.push(1);\r\n          this.mergeSpanArrIndex = 0;\r\n        } else {\r\n          // 判断当前元素与上一个元素是否相同\r\n          if (data[i].supplier === data[i - 1].supplier) {\r\n            this.mergeSpanArr[this.mergeSpanArrIndex] += 1;\r\n            this.mergeSpanArr.push(0);\r\n          } else {\r\n            this.mergeSpanArr.push(1);\r\n            this.mergeSpanArrIndex = i;\r\n          }\r\n        }\r\n      }\r\n      // 如果第一条记录索引为0，向数组中push 1，设置索引值\r\n      // 如果不是第一条记录，判断与前一条记录是否相等，相等则向mergeSpanArr添加元素0\r\n      // 且将前一条记录+1，即需要合并的行数+1，直到得到所有需要合并的行数\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"scss\" >\r\n#wtable {\r\n  .render_label {\r\n    p {\r\n      margin: 0;\r\n    }\r\n  }\r\n  .phone {\r\n    color: #fa7362;\r\n    font-size: 24px;\r\n    margin-left: 10px;\r\n  }\r\n  .cell {\r\n    text-align: center;\r\n  }\r\n  table {\r\n    width: 100% !important;\r\n  }\r\n  .el-table th {\r\n    display: table-cell !important;\r\n  }\r\n\r\n\r\n  .el-table colgroup {\r\n    display: table-cell !important;\r\n  }\r\n  .el-table--enable-row-hover .el-table__body tr:hover > td {\r\n    background-color: inherit !important;\r\n  }\r\n  .el-table .cell,\r\n  .el-table th div,\r\n  .el-table--border td:first-child .cell,\r\n  .el-table--border th:first-child .cell {\r\n    padding-left: 3px !important;\r\n  }\r\n\r\n  .el-table .cell,\r\n  .el-table th div {\r\n    padding-right: 3px !important;\r\n  }\r\n  .el-input__inner {\r\n    padding: 5px !important;\r\n  }\r\n  .el-form--inline .el-form-item {\r\n    display: inline-block;\r\n    vertical-align: top;\r\n    display: flex;\r\n    margin-right: 0;\r\n    justify-content: space-between;\r\n  }\r\n  .el-form--inline .el-form-item__label {\r\n    width: 80px;\r\n    text-align-last: justify;\r\n  }\r\n  .el-dialog__footer {\r\n    text-align: center;\r\n  }\r\n .el-button--primary {\r\n    width: auto !important;\r\n}\r\n  .el-dialog__header {\r\n    text-align: center;\r\n  }\r\n  .el-dialog__body {\r\n    padding: 0 15px;\r\n  }\r\n .wper100{\r\n      width:100% !important;\r\n  }\r\n\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPrice.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPrice.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ControlPrice.vue?vue&type=template&id=f7349cae&\"\nimport script from \"./ControlPrice.vue?vue&type=script&lang=js&\"\nexport * from \"./ControlPrice.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ControlPrice.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPrice.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ControlPrice.vue?vue&type=style&index=0&lang=scss&\"","module.exports = require(\"core-js/library/fn/symbol/iterator\");","module.exports = require(\"core-js/library/fn/symbol\");"],"sourceRoot":""}