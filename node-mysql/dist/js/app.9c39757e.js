(function(e){function t(t){for(var n,o,u=t[0],l=t[1],s=t[2],c=0,f=[];c<u.length;c++)o=u[c],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);p&&p(t);while(f.length)f.shift()();return i.push.apply(i,s||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],n=!0,o=1;o<r.length;o++){var u=r[o];0!==a[u]&&(n=!1)}n&&(i.splice(t--,1),e=l(l.s=r[0]))}return e}var n={},o={app:0},a={app:0},i=[];function u(e){return l.p+"js/"+({}[e]||e)+"."+{"chunk-2b7589e0":"f5f47d68"}[e]+".js"}function l(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.e=function(e){var t=[],r={"chunk-2b7589e0":1};o[e]?t.push(o[e]):0!==o[e]&&r[e]&&t.push(o[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-2b7589e0":"97f75dad"}[e]+".css",a=l.p+n,i=document.getElementsByTagName("link"),u=0;u<i.length;u++){var s=i[u],c=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(c===n||c===a))return t()}var f=document.getElementsByTagName("style");for(u=0;u<f.length;u++){s=f[u],c=s.getAttribute("data-href");if(c===n||c===a)return t()}var p=document.createElement("link");p.rel="stylesheet",p.type="text/css",p.onload=t,p.onerror=function(t){var n=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=n,delete o[e],p.parentNode.removeChild(p),r(i)},p.href=a;var d=document.getElementsByTagName("head")[0];d.appendChild(p)})).then((function(){o[e]=0})));var n=a[e];if(0!==n)if(n)t.push(n[2]);else{var i=new Promise((function(t,r){n=a[e]=[t,r]}));t.push(n[2]=i);var s,c=document.createElement("script");c.charset="utf-8",c.timeout=120,l.nc&&c.setAttribute("nonce",l.nc),c.src=u(e);var f=new Error;s=function(t){c.onerror=c.onload=null,clearTimeout(p);var r=a[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;f.message="Loading chunk "+e+" failed.\n("+n+": "+o+")",f.name="ChunkLoadError",f.type=n,f.request=o,r[1](f)}a[e]=void 0}};var p=setTimeout((function(){s({type:"timeout",target:c})}),12e4);c.onerror=c.onload=s,document.head.appendChild(c)}return Promise.all(t)},l.m=e,l.c=n,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)l.d(r,n,function(t){return e[t]}.bind(null,n));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var f=0;f<s.length;f++)t(s[f]);var p=c;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"3d39":function(e,t,r){},"40ce":function(e,t,r){"use strict";var n=r("a8fa"),o=r.n(n);o.a},"56d7":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"keepTwoNum",(function(){return y}));r("456d"),r("ac6a"),r("cadf"),r("551c"),r("f751"),r("097d");var o=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("router-view")],1)},i=[],u=r("d3be"),l={name:"price",components:{Price:u["default"]}},s=l,c=r("2877"),f=Object(c["a"])(s,a,i,!1,null,null,null),p=f.exports,d=r("8c4f");o["default"].use(d["a"]);var m=new d["a"]({mode:"hash",routes:[{path:"/",name:"price",component:function(){return Promise.resolve().then(r.bind(null,"d3be"))}},{path:"/price",name:"controlPrice",component:function(){return r.e("chunk-2b7589e0").then(r.bind(null,"172c"))}}]}),h=r("2f62");o["default"].use(h["a"]);var b=new h["a"].Store({state:{},mutations:{},actions:{}}),g=r("5c96"),v=r.n(g);r("0fae"),r("3d39"),r("c5f6");function y(e){return e=Number(e),e.toFixed(2)}o["default"].config.productionTip=!1,o["default"].use(v.a),Object.keys(n).forEach((function(e){o["default"].filter(e,n[e])})),new o["default"]({router:m,store:b,render:function(e){return e(p)}}).$mount("#app")},a8fa:function(e,t,r){},d3be:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{width:"100%"},attrs:{id:"wtable"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small","span-method":e.arraySpanMethod,"row-style":e.changeCss,"header-cell-class-name":"headerStyle "}},[r("el-table-column",{attrs:{prop:"supplier",label:"供应商"}}),r("el-table-column",{attrs:{prop:"name",label:"品名"}}),r("el-table-column",{attrs:{prop:"price",label:"单价,(元/吨)","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.price)+"\n        "),"涨"==t.row.trend?r("span",{staticClass:"blue"},[e._v("↑")]):"跌"==t.row.trend?r("span",{staticClass:"red"},[e._v("↓")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"density",label:"密度"}}),r("el-table-column",{attrs:{label:"运费,(元)",prop:"freight","render-header":e.renderHeader,width:"80px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("div",{staticClass:"el-input el-input--mini"},[r("input",{staticClass:"el-input__inner",attrs:{type:"number",autocomplete:"off",min:"0"},domProps:{value:t.row.freight},on:{blur:function(r){return e.setZero(t.row,"freight")},focus:function(r){return e.setEmpty(t.row,"freight")},input:function(r){return e.getEndPrice(t)}}})])]}}])}),r("el-table-column",{attrs:{prop:"endPrice",label:"单位价,(元/升)","render-header":e.renderHeader},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("keepTwoNum")((t.row.price+t.row.freight)/1e3*t.row.density)))]}}])})],1),r("div",{staticClass:"p15"},[r("div",{staticClass:"gray mb15"},[e._v("注：请点击输入运费,计算单位价")]),r("span",{staticClass:"mt15"},[e._v("\n      联系电话:")]),r("a",{staticClass:"phone",attrs:{href:"tel:13436143385"}},[e._v("13436143385")]),r("el-button",{staticClass:"mt15",attrs:{type:"primary"},on:{click:e.toggleDialog}},[e._v("自定义计算")])],1),r("el-dialog",{attrs:{title:"计算单位价",visible:e.isVisible,width:"80%","show-close":!1}},[r("el-form",{attrs:{model:e.form,inline:!0}},[r("el-form-item",{attrs:{label:"单价:"}},[r("el-input",{attrs:{type:"number",min:"0",autocomplete:"off",placeholder:"请输入单价"},on:{blur:function(t){return e.setZero(e.form,"price")},focus:function(t){return e.setEmpty(e.form,"price")},input:function(t){return e.getDialogEndPrice(e.form)}},model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",e._n(t))},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"密度:"}},[r("el-input",{attrs:{type:"number",min:"0",autocomplete:"off",placeholder:"请输入密度"},on:{blur:function(t){return e.setZero(e.form,"density")},focus:function(t){return e.setEmpty(e.form,"density")},input:function(t){return e.getDialogEndPrice(e.form)}},model:{value:e.form.density,callback:function(t){e.$set(e.form,"density",e._n(t))},expression:"form.density"}})],1),r("el-form-item",{attrs:{label:"运费:"}},[r("el-input",{attrs:{type:"number",min:"0",autocomplete:"off",placeholder:"请输入运费"},on:{blur:function(t){return e.setZero(e.form,"freight")},focus:function(t){return e.setEmpty(e.form,"freight")},input:function(t){return e.getDialogEndPrice(e.form)}},model:{value:e.form.freight,callback:function(t){e.$set(e.form,"freight",e._n(t))},expression:"form.freight"}})],1),r("el-form-item",{attrs:{label:"单位价:"}},[r("el-input",{attrs:{disabled:!0,type:"number",autocomplete:"off"},model:{value:e.form.endPrice,callback:function(t){e.$set(e.form,"endPrice",t)},expression:"form.endPrice"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.toggleDialog}},[e._v("关闭")])],1)],1)],1)},o=[],a=(r("28a5"),r("6762"),r("2fdb"),r("c5f6"),r("ac6a"),r("eeb9")),i={data:function(){return{isVisible:!1,form:{price:0,density:0,freight:0,endPrice:0},mergeSpanArr:[],mergeSpanArrIndex:"",oddSupplierArr:[],evenSupplierArr:[],tableData:[]}},mounted:function(){var e=this;a["a"].request("price/queryPrice").then((function(t){t=t.data,"200"==t.code?(e.tableData=t.data,e.setMergeArr(e.tableData),e.getSupplier(e.tableData)):e.$message.error("查询数据失败")}))},methods:{toggleDialog:function(){this.isVisible=!this.isVisible},setEmpty:function(e,t){"0"==e[t]&&(e[t]="")},setZero:function(e,t){""==e[t]&&(e[t]=0)},getEndPrice:function(e){var t=e.$index,r=this.mergeSpanArr[t],n=t+r,o=event.target.value,a=o?parseInt(event.target.value):0;this.tableData.forEach((function(e,r){r>=t&&r<n&&(e.freight=a)}))},getDialogEndPrice:function(e){var t=(e.price+e.freight)/1e3*e.density;e.endPrice=Number(t).toFixed(2)},getSupplier:function(e){var t=this,r=e.reduce((function(e,t){return e.includes(t.supplier)||e.push(t.supplier),e}),[]);r.forEach((function(e,r){r%2?t.oddSupplierArr.push(e):t.evenSupplierArr.push(e)}))},changeCss:function(e){var t=e.row;return this.oddSupplierArr.includes(t.supplier)?"background:#C3CDD6":this.evenSupplierArr.includes(t.supplier)?"background:#EAD0B3":void 0},renderHeader:function(e,t){var r=t.column,n=r.label.split(",");return e("span",{class:"render_label"},[e("p",[n[0]]),e("p",{class:"small-font"},[n[1]])])},arraySpanMethod:function(e){var t=e.rowIndex,r=e.columnIndex;if(0===r||4===r){var n=this.mergeSpanArr[t],o=n>0?1:0;return{rowspan:n,colspan:o}}},setMergeArr:function(e){for(var t=0;t<e.length;t++)0===t?(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=0):e[t].supplier===e[t-1].supplier?(this.mergeSpanArr[this.mergeSpanArrIndex]+=1,this.mergeSpanArr.push(0)):(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=t)}}},u=i,l=(r("40ce"),r("2877")),s=Object(l["a"])(u,n,o,!1,null,null,null);t["default"]=s.exports},eeb9:function(e,t,r){"use strict";var n=r("d225"),o=r("b0b4"),a=r("bc3a"),i=r.n(a),u={baseUrl:{dev:"http://172.16.100.87:8000/",pro:"http://106.54.124.153:80/"}},l=function(){function e(){Object(n["a"])(this,e),this.baseURL=u.baseUrl.pro}return Object(o["a"])(e,[{key:"request",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"get",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=i.a.create(),a={baseURL:this.baseURL,timeout:this.timeout,method:r,url:e,params:t,isLoading:n};return o(a)}}]),e}();t["a"]=new l}});
//# sourceMappingURL=app.9c39757e.js.map