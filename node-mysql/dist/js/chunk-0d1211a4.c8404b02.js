(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0d1211a4"],{"068d":function(e,t,r){t=e.exports=r("2350")(!1),t.push([e.i,'#ctable .el-dialog{margin-top:5vh!important}#ctable .render_label p{margin:0}#ctable .cell{text-align:center}#ctable table{width:100%!important}#ctable .el-table th{display:table-cell!important}#ctable .el-date-editor.el-input,#ctable .el-date-editor.el-input__inner{width:100%}#ctable .el-icon-time:before{content:""}#ctable .el-table colgroup{display:table-cell!important}#ctable .el-table--enable-row-hover .el-table__body tr:hover>td{background-color:inherit!important}#ctable .el-table--border td:first-child .cell,#ctable .el-table--border th:first-child .cell,#ctable .el-table .cell,#ctable .el-table th div{padding-left:3px!important}#ctable .el-table .cell,#ctable .el-table th div{padding-right:3px!important}#ctable .el-form--inline .el-form-item{display:inline-block;vertical-align:top;display:-webkit-box;display:-ms-flexbox;display:flex;margin-right:0}#ctable .el-form--inline .el-form-item__label{width:90px;-moz-text-align-last:justify;text-align-last:justify}#ctable .el-form-item__content{-webkit-box-flex:1;-ms-flex:1;flex:1}#ctable .el-select{width:100%}#ctable .el-dialog__footer{text-align:center}#ctable .el-button--primary{width:auto!important}#ctable .el-dialog__header{text-align:center}#ctable .el-dialog__body{padding:0 15px}#ctable .wper100{width:100%!important}',""]),t.locals={trOddColor:"#c3cdd6",trEvenColor:"#ead0b3"}},"9eff":function(e,t,r){"use strict";var i=r("e247"),a=r.n(i);a.a},bd0b:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"wechat-title",rawName:"v-wechat-title",value:e.$route.meta.title,expression:"$route.meta.title"}],staticStyle:{width:"100%"},attrs:{id:"ctable"}},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",size:"small","span-method":e.arraySpanMethod,"row-style":e.changeCss,"header-cell-class-name":"headerStyle "}},[r("el-table-column",{attrs:{prop:"district",label:"区域"}}),r("el-table-column",{attrs:{prop:"carType",label:"车型"}}),r("el-table-column",{attrs:{prop:"carNo",label:"车牌号"}}),r("el-table-column",{attrs:{prop:"loadWeight",label:"载重,(吨)","render-header":e.renderHeader}}),r("el-table-column",{attrs:{label:"操作",width:"100px",prop:"id"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{staticClass:"mr10 font-12",attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.openUpdateDialog(t.row)}}},[e._v("编辑")]),r("el-link",{staticClass:"font-12",attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.deleteCar(t.row)}}},[e._v("删除")])]}}])})],1),r("div",{staticClass:"p15"},[r("el-button",{staticClass:"mt15 wper100",attrs:{type:"primary"},on:{click:e.openAddDialog}},[e._v("添加")])],1),r("el-dialog",{attrs:{title:e.title+"车信息",visible:e.isVisible,width:"80%","show-close":!1}},[r("el-form",{ref:"form",attrs:{model:e.form,inline:!0,rules:e.rules}},[r("el-form-item",{attrs:{label:"区域:",prop:"district"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入区域"},model:{value:e.form.district,callback:function(t){e.$set(e.form,"district",t)},expression:"form.district"}})],1),r("el-form-item",{attrs:{label:"车型:",prop:"carType"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入车型"},model:{value:e.form.carType,callback:function(t){e.$set(e.form,"carType",t)},expression:"form.carType"}})],1),r("el-form-item",{attrs:{label:"车牌号:",prop:"carNo"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入车牌号"},model:{value:e.form.carNo,callback:function(t){e.$set(e.form,"carNo",t)},expression:"form.carNo"}})],1),r("el-form-item",{attrs:{label:"载重:",prop:"loadWeight"}},[r("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"请输入载重(单位吨)"},model:{value:e.form.loadWeight,callback:function(t){e.$set(e.form,"loadWeight",t)},expression:"form.loadWeight"}})],1),r("el-form-item",{attrs:{label:"介质:",prop:"media"}},[r("el-select",{attrs:{placeholder:"请选择介质"},model:{value:e.form.media,callback:function(t){e.$set(e.form,"media",t)},expression:"form.media"}},e._l(e.mediaList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"电话:",prop:"tel"}},[r("el-input",{attrs:{type:"number",autocomplete:"off",placeholder:"请输入联系电话"},model:{value:e.form.tel,callback:function(t){e.$set(e.form,"tel",t)},expression:"form.tel"}})],1),r("el-form-item",{attrs:{label:"开始时间:",prop:"startTime"}},[r("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"请选择开始时间"},model:{value:e.form.startTime,callback:function(t){e.$set(e.form,"startTime",t)},expression:"form.startTime"}})],1),r("el-form-item",{attrs:{label:"期限:",prop:"limitDays"}},[r("el-select",{attrs:{placeholder:"请选择期限"},model:{value:e.form.limitDays,callback:function(t){e.$set(e.form,"limitDays",t)},expression:"form.limitDays"}},e._l(e.limitDaysList,(function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),r("el-form-item",{attrs:{label:"图片:",prop:"picture"}},[r("van-uploader",{attrs:{"after-read":e.afterRead,"max-count":1,"before-read":e.beforeRead},model:{value:e.form.fileList,callback:function(t){e.$set(e.form,"fileList",t)},expression:"form.fileList"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.controlCar}},[e._v(e._s(e.title))]),r("el-button",{on:{click:e.toggleDialog}},[e._v("关闭")])],1)],1),r("div",{staticClass:"van-toast van-toast--middle van-toast--loading",style:{display:e.isShowLoading}},[e._m(0),r("div",{staticClass:"van-toast__text"},[e._v("\n        "+e._s(e.messsage)+"\n      ")])])],1)},a=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"van-loading van-loading--spinner van-toast__loading"},[r("span",{staticClass:"van-loading__spinner van-loading__spinner--spinner"},[r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i"),r("i")])])}],l=(r("28a5"),r("ac6a"),r("6762"),r("2fdb"),r("7f7f"),r("eeb9")),n=r("bbd5"),o=r("8c1f"),s=r.n(o),c=(r("df7c"),{data:function(){var e=function(e,t,r){var i=/^\d{11}$/;i.test(t)?r():r(new Error("输入正确的电话"))};return{isVisible:!1,messsage:"",isShowLoading:"none",title:"添加",districtList:[],carTypeList:[],limitDaysList:[{value:"一月",label:"一月"}],mediaList:[{value:"汽油",label:"汽油"},{value:"柴油",label:"柴油"}],form:{district:"",carType:"",carNo:"",loadWeight:"",tel:"",media:"",picture:"",id:"",startTime:"",limitDays:"",fileList:[]},rules:{district:[{required:!0,message:"请输入区域",trigger:"change"}],carType:[{required:!0,message:"请输入车型",trigger:"change"}],carNo:[{required:!0,message:"请输入车牌号",trigger:"change"}],loadWeight:[{required:!0,message:"请输入载重",trigger:"change"}],tel:[{required:!0,message:"请输入联系电话",trigger:"change"},{validator:e,trigger:"change"}],media:[{required:!0,message:"请选择介质",trigger:"change"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"change"}],limitDays:[{required:!0,message:"请选择期限",trigger:"change"}]},mergeSpanArr:[],mergeSpanArrIndex:"",oddDistrictArr:[],evenDistrictArr:[],tableData:[]}},mounted:function(){this.queryCar()},methods:{beforeRead:function(e){return"image/jpeg"===e.type||"image/png"===e.type||"image/jpg"===e.type||(this.$message.error("请上传jpeg、png、jpg图片"),!1)},afterRead:function(e){this.uploadImg(e)},uploadImg:function(e){var t=this;this.messsage="上传图片中",this.isShowLoading="block",l["a"].requestPost("upload",{file:e.content,fileName:Date.now()+"-"+e.file.name},"post").then((function(e){e=e.data,"200"==e.code&&(console.log(e.url),t.form.picture=e.url,t.isShowLoading="none")}))},queryCar:function(){var e=this;l["a"].request("car/queryCar").then((function(t){t=t.data,"200"==t.code?(e.tableData=t.data,e.setMergeArr(e.tableData),e.getDistrict(e.tableData)):e.$message.error("查询数据失败")}))},controlCar:function(){var e=this,t="";"添加"==this.title?t="addCar":"修改"==this.title&&(t="updateCar"),this.$refs["form"].validate((function(r){if(!r)return!1;e.requestCar(t,e.title)}))},requestCar:function(e,t){var r=this;this.messsage="请求中",this.isShowLoading="block",console.log(this.form),l["a"].requestPost("car/".concat(e),this.form,"post").then((function(e){e=e.data,r.isShowLoading="none","200"==e.code&&(r.$message({message:"".concat(t,"数据成功"),type:"success"}),r.queryCar(),r.isVisible=!1)}))},openAddDialog:function(){var e=this;this.isVisible=!this.isVisible,this.form={district:"",carType:"",carNo:"",loadWeight:"",tel:"",media:"",picture:"",startTime:"",limitDays:"",fileList:[],id:""},this.title="添加",this.$nextTick((function(){e.$refs["form"].resetFields()}))},openUpdateDialog:function(e){var t=this;this.isVisible=!this.isVisible;var r=Object(n["a"])(e);this.title="修改",console.log(r),this.$nextTick((function(){t.$refs["form"].resetFields(),t.form=Object.assign({},t.form,r),t.form.fileList=[],t.form.fileList.push({url:"http://192.144.184.96:80/"+t.form.picture})}))},toggleDialog:function(){this.isVisible=!this.isVisible},deleteCar:function(e){var t=this;this.form.id=e.id,this.$confirm("你确定要删除该条记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",showClose:!1}).then((function(){t.requestCar("deleteCar","删除")})).catch((function(){}))},getDistrict:function(e){var t=this,r=e.reduce((function(e,t){return e.includes(t.district)||e.push(t.district),e}),[]);r.forEach((function(e,r){r%2?t.oddDistrictArr.push(e):t.evenDistrictArr.push(e)}))},changeCss:function(e){var t=e.row;return this.oddDistrictArr.includes(t.district)?"background:"+s.a.trOddColor:this.evenDistrictArr.includes(t.district)?"background:"+s.a.trEvenColor:void 0},renderHeader:function(e,t){var r=t.column,i=r.label.split(",");return e("span",{class:"render_label"},[e("p",[i[0]]),e("p",{class:"small-font"},[i[1]])])},arraySpanMethod:function(e){var t=e.rowIndex,r=e.columnIndex;if(0===r){var i=this.mergeSpanArr[t],a=i>0?1:0;return{rowspan:i,colspan:a}}},setMergeArr:function(e){this.mergeSpanArr=[],this.mergeSpanArrIndex="";for(var t=0;t<e.length;t++)0===t?(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=0):e[t].district===e[t-1].district?(this.mergeSpanArr[this.mergeSpanArrIndex]+=1,this.mergeSpanArr.push(0)):(this.mergeSpanArr.push(1),this.mergeSpanArrIndex=t)}}}),u=c,f=(r("9eff"),r("2877")),d=Object(f["a"])(u,i,a,!1,null,null,null);t["default"]=d.exports},df7c:function(e,t,r){(function(e){function r(e,t){for(var r=0,i=e.length-1;i>=0;i--){var a=e[i];"."===a?e.splice(i,1):".."===a?(e.splice(i,1),r++):r&&(e.splice(i,1),r--)}if(t)for(;r--;r)e.unshift("..");return e}function i(e){"string"!==typeof e&&(e+="");var t,r=0,i=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){r=t+1;break}}else-1===i&&(a=!1,i=t+1);return-1===i?"":e.slice(r,i)}function a(e,t){if(e.filter)return e.filter(t);for(var r=[],i=0;i<e.length;i++)t(e[i],i,e)&&r.push(e[i]);return r}t.resolve=function(){for(var t="",i=!1,l=arguments.length-1;l>=-1&&!i;l--){var n=l>=0?arguments[l]:e.cwd();if("string"!==typeof n)throw new TypeError("Arguments to path.resolve must be strings");n&&(t=n+"/"+t,i="/"===n.charAt(0))}return t=r(a(t.split("/"),(function(e){return!!e})),!i).join("/"),(i?"/":"")+t||"."},t.normalize=function(e){var i=t.isAbsolute(e),n="/"===l(e,-1);return e=r(a(e.split("/"),(function(e){return!!e})),!i).join("/"),e||i||(e="."),e&&n&&(e+="/"),(i?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,r){function i(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var r=e.length-1;r>=0;r--)if(""!==e[r])break;return t>r?[]:e.slice(t,r-t+1)}e=t.resolve(e).substr(1),r=t.resolve(r).substr(1);for(var a=i(e.split("/")),l=i(r.split("/")),n=Math.min(a.length,l.length),o=n,s=0;s<n;s++)if(a[s]!==l[s]){o=s;break}var c=[];for(s=o;s<a.length;s++)c.push("..");return c=c.concat(l.slice(o)),c.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),r=47===t,i=-1,a=!0,l=e.length-1;l>=1;--l)if(t=e.charCodeAt(l),47===t){if(!a){i=l;break}}else a=!1;return-1===i?r?"/":".":r&&1===i?"/":e.slice(0,i)},t.basename=function(e,t){var r=i(e);return t&&r.substr(-1*t.length)===t&&(r=r.substr(0,r.length-t.length)),r},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,r=0,i=-1,a=!0,l=0,n=e.length-1;n>=0;--n){var o=e.charCodeAt(n);if(47!==o)-1===i&&(a=!1,i=n+1),46===o?-1===t?t=n:1!==l&&(l=1):-1!==t&&(l=-1);else if(!a){r=n+1;break}}return-1===t||-1===i||0===l||1===l&&t===i-1&&t===r+1?"":e.slice(t,i)};var l="b"==="ab".substr(-1)?function(e,t,r){return e.substr(t,r)}:function(e,t,r){return t<0&&(t=e.length+t),e.substr(t,r)}}).call(this,r("f28c"))},e247:function(e,t,r){var i=r("068d");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var a=r("499e").default;a("b3836a28",i,!0,{sourceMap:!1,shadowMode:!1})},f28c:function(e,t){var r,i,a=e.exports={};function l(){throw new Error("setTimeout has not been defined")}function n(){throw new Error("clearTimeout has not been defined")}function o(e){if(r===setTimeout)return setTimeout(e,0);if((r===l||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}function s(e){if(i===clearTimeout)return clearTimeout(e);if((i===n||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{return i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(function(){try{r="function"===typeof setTimeout?setTimeout:l}catch(e){r=l}try{i="function"===typeof clearTimeout?clearTimeout:n}catch(e){i=n}})();var c,u=[],f=!1,d=-1;function m(){f&&c&&(f=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!f){var e=o(m);f=!0;var t=u.length;while(t){c=u,u=[];while(++d<t)c&&c[d].run();d=-1,t=u.length}c=null,f=!1,s(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new h(e,t)),1!==u.length||f||o(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=g,a.addListener=g,a.once=g,a.off=g,a.removeListener=g,a.removeAllListeners=g,a.emit=g,a.prependListener=g,a.prependOnceListener=g,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}}]);